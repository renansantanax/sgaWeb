<div class="min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900 text-slate-900 dark:text-slate-100">
  <main class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8 space-y-6">

    <header class="flex flex-col gap-3 md:flex-row md:items-end md:justify-between">
      <div>
        <h1 class="text-3xl md:text-4xl font-black tracking-tight bg-gradient-to-r from-teal-600 via-sky-600 to-emerald-600 bg-clip-text text-transparent">
          Gerenciamento de Colaboradores
        </h1>
        <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
          Consulte, adicione ou edite os colaboradores da empresa.
        </p>
      </div>
      <button class="inline-flex items-center gap-2 px-4 py-2 rounded-xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 hover:bg-white/90 dark:hover:bg-slate-900 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6" />
        </svg>
        Adicionar Colaborador
      </button>
    </header>

    <div *ngIf="errorMessage()" class="rounded-2xl ring-1 ring-red-200/70 dark:ring-red-900/40 bg-red-50/70 dark:bg-red-900/20 text-red-800 dark:text-red-200 p-4">
      {{ errorMessage() }}
      <button class="ml-2 underline hover:no-underline" (click)="fetchColaboradores()">tentar novamente</button>
    </div>

    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <div class="rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 p-5">
        <p class="text-sm text-slate-500 dark:text-slate-400">Total</p>
        <p class="mt-1 text-3xl font-bold">{{ kpiTotal() }}</p>
      </div>
      <div class="rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 p-5">
        <p class="text-sm text-slate-500 dark:text-slate-400">Ativos</p>
        <p class="mt-1 text-3xl font-bold">{{ kpiAtivos() }}</p>
      </div>
      <div class="rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 p-5">
        <p class="text-sm text-slate-500 dark:text-slate-400">Inativos</p>
        <p class="mt-1 text-3xl font-bold">{{ kpiInativos() }}</p>
      </div>
      <div class="rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 p-5">
        <p class="text-sm text-slate-500 dark:text-slate-400">Com Equipamento</p>
        <p class="mt-1 text-3xl font-bold">{{ kpiComEquipamento() }}</p>
      </div>
    </section>

    <section class="rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 p-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <div class="md:col-span-2">
          <label class="block text-sm mb-1 text-slate-600 dark:text-slate-300">Buscar por Nome ou Email</label>
          <input #searchBox (input)="onSearch(searchBox.value)" type="text" placeholder="Digite para buscar…" class="w-full px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-950/40 outline-none focus:ring-2 focus:ring-blue-500" />
        </div>
        <div>
          <label class="block text-sm mb-1 text-slate-600 dark:text-slate-300">Status</label>
          <select #statusSel (change)="onChangeStatus(statusSel.value)" class="w-full px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-950/40 outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Todos</option>
            <option *ngFor="let s of statusList()" [value]="s">{{ s }}</option>
          </select>
        </div>
        <div>
          <label class="block text-sm mb-1 text-slate-600 dark:text-slate-300">Setor</label>
          <select #setorSel (change)="onChangeSetor(setorSel.value)" class="w-full px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-950/40 outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Todos</option>
            <option *ngFor="let s of setorList()" [value]="s">{{ s }}</option>
          </select>
        </div>
      </div>
    </section>

    <section *ngIf="isLoading()" class="space-y-3">
      <div class="h-10 rounded-2xl bg-slate-200/70 dark:bg-slate-800 animate-pulse"></div>
      <div class="h-64 rounded-2xl bg-slate-200/70 dark:bg-slate-800 animate-pulse"></div>
    </section>

    <section *ngIf="!isLoading() && total() === 0" class="rounded-2xl ring-1 ring-slate-200 dark:ring-slate-800 bg-white/70 dark:bg-slate-900/60 p-10 text-center">
      <p class="text-lg font-medium">Nenhum colaborador encontrado</p>
      <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">Ajuste os filtros ou adicione novos colaboradores.</p>
    </section>

    <section *ngIf="!isLoading() && total() > 0" class="rounded-2xl overflow-hidden ring-1 ring-slate-200 dark:ring-slate-800 bg-white/80 dark:bg-slate-900/60">
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100/70 dark:bg-slate-800/70 text-slate-700 dark:text-slate-200">
            <tr>
              <th class="px-6 py-3 text-left font-semibold">Nome</th>
              <th class="px-6 py-3 text-left font-semibold">Email</th>
              <th class="px-6 py-3 text-left font-semibold">Setor</th>
              <th class="px-6 py-3 text-left font-semibold">Equipamento Atribuído</th>
              <th class="px-6 py-3 text-left font-semibold">Status</th>
              <th class="px-6 py-3 text-center font-semibold">Ações</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-100 dark:divide-slate-800">
            <tr *ngFor="let colab of paginated(); trackBy: trackById" class="hover:bg-slate-50/80 dark:hover:bg-slate-800/40 transition">
              <td class="px-6 py-3 font-medium text-slate-800 dark:text-slate-100">{{ colab.nome }}</td>
              <td class="px-6 py-3 text-slate-600 dark:text-slate-300">{{ colab.email }}</td>
              <td class="px-6 py-3">{{ colab.setor }}</td>
              <td class="px-6 py-3 font-mono text-xs">{{ colab.equipamento?.modelo || '—' }}</td>
              <td class="px-6 py-3">
                <span class="px-2 py-1 text-xs font-semibold rounded-full" [ngClass]="{
                        'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200': colab.situacao === 'ATIVO',
                        'bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200': colab.situacao === 'INATIVO'
                      }">
                  {{ colab.situacao }}
                </span>
              </td>
              <td class="px-6 py-3 text-center space-x-3">
                <button class="text-blue-600 hover:underline">Editar</button>
                <button class="text-red-600 hover:underline">Excluir</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 p-4">
      </div>
    </section>

  </main>
</div>